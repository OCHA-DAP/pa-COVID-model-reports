---
output:  
  pdf_document: 
    md_extensions: +raw_attribute
    latex_engine: xelatex
    fig_caption: yes
  classoption: twocolumn
  extra_dependencies: xcolor
params:
  assignment_date: '2020-10-07'      
fontsize: 11pt
geometry: margin=0.6in
urlcolor: centreBlue
header-includes:
    - \usepackage{setspace}\singlespacing
    - \usepackage{colortbl}
    - \usepackage{caption}
    - \usepackage{wrapfig}
    - \usepackage{fontspec}
    - \setmainfont{Source Sans Pro}
    - \usepackage{fancyhdr}
    - \pagestyle{fancy}
    - \usepackage{float}
    - \captionsetup[figure]{labelformat=empty}
editor_options: 
  chunk_output_type: inline
---
\arrayrulecolor{white}
\definecolor{centreGreen}{HTML}{1bb580}
\definecolor{centreBlue}{HTML}{1f69b3}
\definecolor{withNPIColor}{HTML}{d9ead3}
\definecolor{noNPIColor}{HTML}{f4cccc}
\definecolor{withNPIFontColor}{HTML}{20aa6c}
\definecolor{noNPIFontColor}{HTML}{be0003}
\thispagestyle{fancy} 
\lhead{}
\chead{}
\rhead{} 
\lfoot{\fontsize{7}{7}\leavevmode\selectfont\textcolor{gray}{\thepage}}
\cfoot{}
\rfoot{\fontsize{7}{7}\leavevmode\selectfont\textcolor{gray}{The OCHA Centre for Humanitarian Data | Connecting people and data to improve lives}}
\renewcommand{\headrulewidth}{0pt} 
\renewcommand{\footrulewidth}{0.4pt}
\captionsetup[table]{labelformat=empty}

![](visual_assets/double_logo_header.jpg)


```{r key_messages, echo = FALSE}

# NOTE: each bullet point needs to start with a * followed by a space, and end with a Return when followed by another bullet point

key_messages_current_situation <- "
* A total of 387,121 cases and 9,531 deaths have been reported by the WHO. 
* The current number of severe cases requiring healthcare support is estimated at 6,099 - 10,359.
* Progress towards containment is lacking: cases continue to climb sharply and the entire country is categorised as Tipping Point (= highest level of risk) and as requiring intense control efforts (see section 2).
"   

key_messages_national_projections <- "
* In the next 4 weeks, the total number of cases is projected to reach 435,795 - 479,200 and the total number of deaths is projected to reach 11,531 - 12,294 if current NPIs are maintained.
* Lifting of NPIs would lead to a larger increase in cases and deaths (up to 72,609 more cases and up to 979 more deaths; see sections 2 and 3 for details).
* The number of severe cases requiring healthcare is projected to increase especially if NPIs are lifted (see section 3).
"

key_messages_subnational_projections <- "
* The ratio of active cases per 100,000 people is projected to remain a tipping point in the next two weeks and to still require intense control effort to make progress toward containment (see section 4).
"
```

```{r setup, include = FALSE, message = FALSE, warning = FALSE}
library(tidyverse)
library(knitr)
library(kableExtra)
library(pander)

options(scipen = 999) # effectively remove scientific notation

# country specs
country <- 'Iraq'
country_iso_3_code <- 'IRQ'

# report specs
assignment_date <- as.Date(params$assignment_date)

# compute projection dates
projection_date_4w <- assignment_date + 28
projection_date_2w <- assignment_date + 14

# specify file locations
who_data_filename <- "../WHO_data/WHO-COVID-19-global-data.csv"

# functions
colorize <- function(x, color) {
  if (knitr::is_latex_output()) {
    sprintf("\\textcolor{%s}{%s}", color, x)
  } else if (knitr::is_latex_output()) {
    sprintf("<span style='color: %s;'>%s</span>", color, 
      x)
  } else x
}
```

```{r updated_inputs, echo = FALSE}

# import metrics for the country
report_metrics_filename <- paste0("report_metrics/", country_iso_3_code, "_results.csv")
report_metrics_all_dates <- read.csv(report_metrics_filename)

# keep latest metrics
report_metrics <- report_metrics_all_dates %>% filter(assessment_date == assignment_date)

# cfr
cfr <- report_metrics %>% filter(metric_name == 'CFR') %>% select(metric_value) %>% as.numeric()
cfr <- round(cfr, 1)
cfr_text <- paste0(cfr, '%')

# Current Situation MOPH data counts
latest_moph_datapoint_date <- report_metrics %>% filter(metric_name == "Current situation - latest date MPHO reported numbers") %>% select(metric_value) %>% as.character() %>% as.Date("%Y-%m-%d")

mpho_current_cum_cases <- report_metrics %>% filter(metric_name == "Current situation - latest MPHO cases") %>% select(metric_value) %>% as.numeric()
mpho_current_cum_cases <- format(round(mpho_current_cum_cases, 0), big.mark = ",")

mpho_current_cum_deaths <- report_metrics %>% filter(metric_name == "Current situation - latest MPHO deaths") %>% select(metric_value) %>% as.numeric()
mpho_current_cum_deaths <- format(round(mpho_current_cum_deaths, 0), big.mark = ",")

# bucky projections and estimates
npi_projected_cases_4w_LOW <- report_metrics %>% filter(metric_name == "NPI - projected reported cases in 4w - MIN") %>% select(metric_value) %>% as.numeric()
npi_projected_cases_4w_LOW <- format(round(npi_projected_cases_4w_LOW, 0), big.mark = ",")

npi_projected_cases_4w_HI <- report_metrics %>% filter(metric_name == "NPI - projected reported cases in 4w - MAX") %>% select(metric_value) %>% as.numeric()
npi_projected_cases_4w_HI <- format(round(npi_projected_cases_4w_HI, 0), big.mark = ",")

npi_projected_deaths_4w_LOW <- report_metrics %>% filter(metric_name == "NPI - projected reported deaths in 4w - MIN") %>% select(metric_value) %>% as.numeric()
npi_projected_deaths_4w_LOW <- format(round(npi_projected_deaths_4w_LOW, 0), big.mark = ",")

npi_projected_deaths_4w_HI <- report_metrics %>% filter(metric_name == "NPI - projected reported deaths in 4w - MAX") %>% select(metric_value) %>% as.numeric()
npi_projected_deaths_4w_HI <- format(round(npi_projected_deaths_4w_HI, 0), big.mark = ",")

no_npi_projected_cases_4w_LOW <- report_metrics %>% filter(metric_name == "NO NPI - projected reported cases in 4w - MIN") %>% select(metric_value) %>% as.numeric()
no_npi_projected_cases_4w_LOW <- format(round(no_npi_projected_cases_4w_LOW, 0), big.mark = ",")

no_npi_projected_cases_4w_HI <- report_metrics %>% filter(metric_name == "NO NPI - projected reported cases in 4w - MAX") %>% select(metric_value) %>% as.numeric()
no_npi_projected_cases_4w_HI <- format(round(no_npi_projected_cases_4w_HI, 0), big.mark = ",")

no_npi_projected_deaths_4w_LOW <- report_metrics %>% filter(metric_name == "NO NPI - projected reported deaths in 4w - MIN") %>% select(metric_value) %>% as.numeric()
no_npi_projected_deaths_4w_LOW <- format(round(no_npi_projected_deaths_4w_LOW, 0), big.mark = ",")

no_npi_projected_deaths_4w_HI <- report_metrics %>% filter(metric_name == "NO NPI - projected reported deaths in 4w - MAX") %>% select(metric_value) %>% as.numeric()
no_npi_projected_deaths_4w_HI <- format(round(no_npi_projected_deaths_4w_HI, 0), big.mark = ",")

hospitalizations_current_LOW <- report_metrics %>% filter(metric_name == "Hospitalizations current situation - MIN") %>% select(metric_value) %>% as.numeric()
hospitalizations_current_LOW <- format(round(hospitalizations_current_LOW, 0), big.mark = ",")

hospitalizations_current_HI <- report_metrics %>% filter(metric_name == "Hospitalizations current situation - MAX") %>% select(metric_value) %>% as.numeric()
hospitalizations_current_HI <- format(round(hospitalizations_current_HI, 0), big.mark = ",")

npi_hospitalizations_LOW <- report_metrics %>% filter(metric_name == "NPI Hospitalizations projections 4w - MIN") %>% select(metric_value) %>% as.numeric()
npi_hospitalizations_LOW <- format(round(npi_hospitalizations_LOW, 0), big.mark = ",")

npi_hospitalizations_HI <- report_metrics %>% filter(metric_name == "NPI Hospitalizations projections 4w - MAX") %>% select(metric_value) %>% as.numeric()
npi_hospitalizations_HI <- format(round(npi_hospitalizations_HI, 0), big.mark = ",")

no_npi_hospitalizations_LOW <- report_metrics %>% filter(metric_name == "NO NPI Hospitalizations projections 4w - MIN") %>% select(metric_value) %>% as.numeric()
no_npi_hospitalizations_LOW <- format(round(no_npi_hospitalizations_LOW, 0), big.mark = ",")

no_npi_hospitalizations_HI <- report_metrics %>% filter(metric_name == "NO NPI Hospitalizations projections 4w - MAX") %>% select(metric_value) %>% as.numeric()
no_npi_hospitalizations_HI <- format(round(no_npi_hospitalizations_HI, 0), big.mark = ",")

```

```{r risk_levels, echo = FALSE}

effort_needed_table <- data.frame('level' = c('Red', 'Orange', 'Yellow', 'Green'), 
                                  'incidence' = c('25+', '10-25', '1-10', '<1'), 
                                  'effort' = c('Stay-at-home orders necessary', 
                                               'Strategic choices must be made about which package of non-pharmaceutical interventions to use for control. Stay-at-home orders are advised, unless viral testing and contact tracing capacity are implementable                                                    at levels meeting surge indicator standards.',
                                               'Strategic choices must be made about which package of non-pharmaceutical interventions to use for control',
                                               'On track for containment, conditional on continuing use of viral testing and contact tracing for surveillance and to contain spikes and outbreaks.')
                                  )
```


```{r who_data, include = FALSE}
who_data <- read.csv(who_data_filename)
who_data$Date_reported <- as.Date(who_data$Date_reported)
current_cum_cases <- who_data %>%
                      filter(Country == country & 
                      Date_reported == assignment_date) %>%
                      select(Cumulative_cases) %>%
                      as.numeric() %>%
                      format(., big.mark = ",")

current_cum_deaths <- who_data %>%
                      filter(Country == country & 
                      Date_reported == assignment_date) %>%
                      select(Cumulative_deaths) %>%
                      as.numeric() %>%
                      format(., big.mark = ",")  
```

```{r graphs, include = FALSE}
current_incidence_risk_graph_path <- paste0("../Outputs/", country_iso_3_code, "/map_cases_per_100k_total_current.png")
cum_cases_graph_path <- paste0("../Outputs/", country_iso_3_code, "/current_cumulative_reported_cases.png")
cum_deaths_graph_path <- paste0("../Outputs/", country_iso_3_code, "/current_cumulative_deaths.png")
new_cases_graph_path <- paste0("../Outputs/", country_iso_3_code, "/current_daily_cases_reported.png")
new_deaths_graph_path <- paste0("../Outputs/", country_iso_3_code, "/current_daily_deaths.png")
lifetime_cum_cases_graph_path <- paste0("../Outputs/", country_iso_3_code, "/lifetime_cumulative_reported_cases.png")
lifetime_cum_deaths_graph_path <- paste0("../Outputs/", country_iso_3_code, "/lifetime_cumulative_deaths.png")
lifetime_new_cases_graph_path <- paste0("../Outputs/", country_iso_3_code, "/lifetime_daily_cases_reported.png")
lifetime_new_deaths_graph_path <- paste0("../Outputs/", country_iso_3_code, "/lifetime_daily_deaths.png")
hospitalizations_graph_path <- paste0("../Outputs/", country_iso_3_code, "/projection_hospitalizations.png")
subnational_cases_per_100k_graph_path <- paste0("../Outputs/", country_iso_3_code, "/map_cases_per_100k_2w.png")
risk_levels_quadrants_path <- paste0("visual_assets/risk_levels_quadrants.png")

```

```{r subnational_projections_data, include = FALSE}
subnational_full_projections_filename <- paste0("../Bucky_results/", paste0(country_iso_3_code, "_npi"), "/adm1_quantiles.csv")
subnational_full_projections <- read.csv(subnational_full_projections_filename)
subnational_projections_filename <- paste0("../Outputs/", country_iso_3_code, "/ADM1_ranking.csv")
subnational_projections <- read.csv(subnational_projections_filename)
subnational_projections$cases_per_100k_abs_change <- round(as.numeric(subnational_projections$cases_per_100k_abs_change), 2)
subnational_projections$cases_per_100k_inTWOweeks <- round(subnational_projections$cases_per_100k_inTWOweeks, 3)

#subnational_raw_yaml <- yaml::read_yaml(file = "../config.yml")
#subnational_yaml_df <- data.frame(reshape2::melt(subnational_raw_yaml)) 
#country_subnational_data_url <- subnational_yaml_df %>% filter(L1 == country_iso_3_code & L2 == 'subnational_cases_url') %>% select(value) %>% as.character() 
#country_subnational_data <- read.csv(country_subnational_data_url)
#country_subnational_data <- country_subnational_data %>% 
#                                rename(adm1_pcode = 'X.adm1.pcode', 
#                                       adm2_pcode = 'X.adm2.pcode', 
#                                       date = 'X.date', 
#                                       affected_infected_confirmed_total = "X.affected.infected.confirmed.total", 
#                                       affected_infected_dead_total = "X.affected.infected.dead.total")

```

# `r paste(colorize('COVID-19 Projections:', 'centreGreen'), colorize(country, 'centreGreen'))`
#### Report Date: `r format(assignment_date, "%d %b %Y")`    

&nbsp;

This report summarizes the COVID-19 model results for Afghanistan, developed by the OCHA Centre for Humanitarian Data in partnership with the Johns Hopkins University Applied Physics Laboratory. These projections are based on COVID-19 cases and deaths data up to `r format(assignment_date, format="%d %B %Y")`. The data is sourced from World Health Organization (WHO) and the country's Ministry of Public Health (MOPH). For dynamic updates to this data and more, see the [HDX COVID-19 Map Explorer](https://data.humdata.org/visualization/covid19-humanitarian-operations/#). For additional information, please contact Leonardo Milano at: <leonardo.milano@un.org>.

![](visual_assets/green_horizontal_line.png){height=30px}

\Large \textbf{`r colorize('1. Key Messages', 'centreGreen')`}[^1][^2]

\large \textbf{Current Situation} \normalsize (as of `r format(assignment_date, "%d %b %Y")`)
\normalsize
`r key_messages_current_situation`

\large \textbf{National Projections} \normalsize (in the next 4 weeks or by `r format(projection_date_4w, "%d %b %Y")`)
\normalsize
`r key_messages_national_projections`

\large \textbf{Subnational Projections} \normalsize (in the next 2 weeks or by `r format(projection_date_2w, "%d %b %Y")`)
\normalsize
`r key_messages_subnational_projections`

\newpage

\Large \textbf{`r colorize('2. Current Situation', 'centreGreen')`} \normalsize (as of `r format(assignment_date, "%d %b %Y")`)

\large \textbf{`r colorize('Containment Progress', 'centreBlue')`}
\normalsize 

The key performance indicators below can be used to evaluate how effective the response has been in containing the spread of the virus. The map on the left illustrates risk levels to help decision-makers and community members know where they are. The levels communicate whether a region is on track for containment and what intensity of effort is needed to control COVID at varying levels of community spread. The map on the right represents the current need for healthcare support.

\begin{center}
\includegraphics[width=0.5\textwidth]{`r current_incidence_risk_graph_path`}
\end{center}

```{r containment_progress_table, echo = FALSE}
kbl(effort_needed_table, 
    align = 'l',
    col.names = c("Risk Level", "Case Incidence*", "Intensity of Control Effort Needed")) %>%
    add_footnote(c("*Daily new cases per 100,000 people as reported by WHO", "See \\href{https://globalepidemics.org/wp-content/uploads/2020/09/key_metrics_and_indicators_v5-1.pdf}{Key Metrics for COVID Suppression} for additional guidance on control effort needed."),
                notation = "none", 
                escape = F) %>%
    row_spec(0, bold = TRUE, font_size = 11) %>% 
    kableExtra::kable_styling(latex_options=c("scale_down", "hold_position")) %>%
    column_spec(3, width = "16cm") %>%
    column_spec(2, width = "2cm") %>%
    column_spec(1, width = "2cm") %>%
    row_spec(1, background = "#df431d") %>%
    row_spec(2, background = "#f88c29") %>%
    row_spec(3, background = "#f8b931") %>%
    row_spec(4, background = "#00a67e")
```

\large \textbf{`r colorize('Key Figures: Cumulative Cases and Deaths', 'centreBlue')`}

```{r section2_cumulative_figures, echo = FALSE}

x <- data.frame(Cases = c(current_cum_cases, mpho_current_cum_cases),
                Deaths = c(current_cum_deaths, mpho_current_cum_deaths)) 

row.names(x) <- c("Based on WHO reports", "Based on MOPH data")

x %>% 
            kable(align = 'c',
                  col.names = c('Cumulative Cases', 'Cumulative Deaths'),
                  row.names = TRUE) %>%
            kableExtra::kable_styling(row_label_position = 'r',
                                      position = 'center',
                                      font_size = 11) %>%
            row_spec(0, bold = FALSE, font_size = 12)

```

\footnotesize

\begin{center}
Case Fatality Rate: `r cfr`\%

Most recent data from MOPH dated: `r latest_moph_datapoint_date`
\end{center}

\large \textbf{`r colorize('Key Figures: Current Severe Cases', 'centreBlue')`}

```{r section2_hospitalization_estimate, echo = FALSE}

x <- data.frame(Hospitalizations = paste0(hospitalizations_current_LOW, " - ", hospitalizations_current_HI))
row.names(x) <- "Estimate"

x %>% 
            kable(format = "latex", 
                  align = 'c',
                  col.names = c('Current Hospitalizations'),
                  row.names = TRUE) %>%
            kableExtra::kable_styling(row_label_position = 'r',
                                      position = 'center',
                                      font_size = 11) %>%
            row_spec(0, bold = FALSE, font_size = 12, hline_after = T) 
```

\newpage

\Large \textbf{`r colorize('3. National Projections', 'centreGreen')`} \normalsize (for the next 4 weeks or by `r format(projection_date_4w, "%d %b %Y")`)

The regional data provided by the Ministry of Public Health was used to generate projections at the subnational level, which were then aggregated to the national level. 


\large \textbf{`r colorize('Projected Cases and Deaths', 'centreBlue')`}

|  | Projected Cases | | Projected Deaths | 
|------------:|:-----|:---------|:------|
| \colorbox{withNPIColor}{With current NPIs maintained} | \textcolor{withNPIFontColor}{`r paste(npi_projected_cases_4w_LOW, " - ", npi_projected_cases_4w_HI)`}| | \textcolor{withNPIFontColor}{`r paste(npi_projected_deaths_4w_LOW, " - ", npi_projected_deaths_4w_HI)` } |
| \colorbox{noNPIColor}{With no NPIs} | \textcolor{noNPIFontColor}{`r paste(no_npi_projected_cases_4w_LOW, " - ", no_npi_projected_cases_4w_HI)`} | | \textcolor{noNPIFontColor}{`r paste(no_npi_projected_deaths_4w_LOW, " - ", no_npi_projected_deaths_4w_HI)` } |


[^1]: \textbf{Reported cases} refers to the number of infections expected to be reported. It takes into account the \textbf{case reporting rate} which corresponds to the estimated number of COVID-19 infections that are actually tested, confirmed and reported. The case reporting rate is calculated based on the reported number of deaths and cases in the last 30 days.

[^2]: \textbf{Severe cases} refers to the number of people which will have severe symptoms and may require healthcare support. It is calculated as a proportion of the reported cases, and is based on planning parameters for case severity and the vulnerability of a given region.


\normalsize The figures below present the historical data on daily counts of cases and deaths, and their projected trends. Trends are represented by a green line for the "Current NPIs maintained" scenario and a red line for the "No NPIs in place" scenario. Note that deaths typically lag reported cases by 2-8 weeks.

![](`r lifetime_new_cases_graph_path`){width=350px} ![](`r lifetime_new_deaths_graph_path`){width=350px}

&nbsp;

The figures below furthermore show the comparison between the reported data from two different sources: national level data from WHO in light blue and subnational data from the Ministry of Public Health in dark blue. 

![](`r lifetime_cum_cases_graph_path`){width=350px} ![](`r lifetime_cum_deaths_graph_path`){width=350px}


\newpage

\large \textbf{`r colorize('Projected Severe Cases', 'centreBlue')`}

\normalsize The figures below show the projected trends for severe cases requiring hospitalizations. In green are the projections under the "Current NPIs maintained" scenario while in red are the projections under "No NPIs in place" scenario. 

| | Severe Cases |
|------------:|:-----|
| \colorbox{withNPIColor}{With current NPIs maintained} | \textcolor{withNPIFontColor}{`r paste(npi_hospitalizations_LOW, " - ", npi_hospitalizations_HI)`}|
| \colorbox{noNPIColor}{With no NPIs} | \textcolor{noNPIFontColor}{`r paste(no_npi_hospitalizations_LOW , " - ", no_npi_hospitalizations_HI)`} | 

\begin{center}
\includegraphics[width=0.5\textwidth]{`r hospitalizations_graph_path`}
\end{center}

\newpage

\Large \textbf{`r colorize('4. Subnational Projections', 'centreGreen')`} \normalsize (for the next 2 weeks or by `r format(projection_date_2w, "%d %b %Y")`)

\large \textbf{`r colorize('Projected Incidence', 'centreBlue')`}

\footnotesize Assuming current NPIs[^3] are maintained.

![](`r subnational_cases_per_100k_graph_path`){width=375px} ![](`r risk_levels_quadrants_path`){width=350px}

&nbsp;

```{r removed, echo=F} 
# should go in main body above this chunk
#\large \textbf{`r colorize('Projected Changes In Incidence', 'centreBlue')`}

#Regions ordered in decreasing order of change magnitude, from largest increase (more concerning) to largest #decrease (less concerning). While the magnitude of change may signal how successful mitigation strategies are #projected to be, it should be evaluated in conjunction with regional incidence (cases per 100k people) when #considering adding or lifting containment measures. 

#Remove eval=F below
```

```{r subnational_deltas, echo = FALSE, eval=F}
increases_nrow <- subnational_projections %>%
                          filter(cases_per_100k_abs_change >= 0) %>%
                          nrow()

decreases_nrow <- subnational_projections %>%
                          filter(cases_per_100k_abs_change < 0) %>%
                          nrow()

#### ADD ME: daily new cases for every region?
  
subnational_projections %>%
          arrange(desc(cases_per_100k_abs_change)) %>% # orders regions from largest to smallest change 
          select(ADM1_EN, cases_per_100k_abs_change, cases_per_100k_inTWOweeks) %>%
          kable(format = 'latex',
                col.names = c("Region", "Change (%)", "Projected Cases per 100k People")) %>%
          pack_rows(index = c('Increasing or Stable' = increases_nrow, 'Decreasing' = decreases_nrow)) %>%
          row_spec(0, bold = TRUE) %>%
          kable_styling(latex_options = c('striped', 'hold_position'))

```



[^3]: \textbf{Non-pharmaceutical interventions - NPIs} are all measures implemented by different actors with the aim of reducing the spread and the impact of COVID-19. The NPIs currently in place in Afghanistan are extracted from the [ACAPS database](https://data.humdata.org/dataset/acaps-covid19-government-measures-dataset) and complemented with additional contextual information provided by our partners in the country. 

\clearpage

\Large \textbf{Background on Model Methodology}
\normalsize

The Centre established a partnership with the Johns Hopkins University Applied Physics Laboratory to develop a COVID-19 model which provides projections and insights related to the **scale** of the crisis, the **duration** of the crisis in a specific location, and how different response **interventions** are expected to impact the epidemic curve.

The team is using an **SEIR (Susceptible, Exposed, Infectious, Recovered)** model of infectious disease dynamics which is considered the simplest and most effective technique used in the literature. The model is based on a progression from susceptible to either recovered or dead. Inputs include the reproduction rate (Ro), case fatality rate (CFR), and estimated probabilities that an individual person may contract COVID-19. The model then simulates an outbreak and provides estimates for cases, hospitalizations, and deaths.

\begin{center}
\includegraphics{visual_assets/seird_with_legend.png}
\end{center}

The key features of the model include:

- **Tuning on reported data** The estimation of the main parameters (mainly the reproduction rate R0 and the case reporting rate) is tuned according to the observed recent trends in reported COVID-19 cases.
- **Subnational** The model provides COVID-19 projections at the subnational level, matching the administrative level at which COVID-19 cases are reported.
- **Spatial spread** The density of roads is used to estimate the expected mobility patterns and to simulate the spread of COVID-19 between administrative units.
- **Population stratification** The model fidelity is increased by taking into consideration:
    + The age structure of the population at the subnational level
    + The expected probability of contact between populations of different age groups, including contacts expected to happen at work, school, home and everywhere else (social mixing)
    + Vulnerability factors such as food insecurity, household air pollution and access to handwashing facilities.
- **Non-pharmaceutical interventions (NPIs)** The model simulates the expected impact of NPIs at the subnational level, and also how the outbreaks is influenced by changing NPIs implemented over time. The NPIs currently implemented can be categorised in three main groups:
    + Mobility based NPIs, which would limit the spread of disease between administrative units (e.g. border closures)
    + Contact based  NPIs, which reduce the probability of contact between specific groups (e.g. shielding of the elderly, closing schools)
    + R0 based NPIs, which reduce the overall reproduction rate (e.g. awareness campaigns, curfews)





